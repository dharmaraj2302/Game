<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<title>Will You Be My Valentine?</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

* { box-sizing: border-box; }

body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle, #ff9a9e, #ff4d6d);
  font-family: 'Press Start 2P', cursive;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ---------- GAME ---------- */

.container {
  width: 100%;
  text-align: center;
}

.hidden {
  display: none !important;
}

h1 {
  color: white;
  font-size: 1.1rem;
  text-shadow: 0 0 12px hotpink;
}

.score {
  font-size: 0.6rem;
  color: #fff;
  margin-bottom: 8px;
}

.chibi {
  font-size: 4rem;
  margin: 10px 0;
  animation: bounce 0.9s infinite alternate;
}

.buttons {
  position: relative;
  height: 280px;
}

/* ---------- BUTTONS ---------- */

button {
  border: none;
  border-radius: 20px;
  padding: 18px 32px;
  font-size: 0.75rem;
  cursor: pointer;
  position: absolute;
  touch-action: manipulation;
}

#yesBtn {
  left: 50%;
  bottom: 20px;
  transform: translateX(-50%);
  background: radial-gradient(circle, #ff4d6d, #ff0033);
  color: white;
  box-shadow: 0 0 20px #ff4d6d;
}

#yesBtn.boss {
  animation: bossPulse 0.6s infinite alternate;
  font-size: 1rem;
  padding: 26px 46px;
  box-shadow: 0 0 45px red;
}

#noBtn {
  left: 50%;
  top: 60px;
  transform: translateX(-50%);
  background: #222;
  color: white;
}

/* ---------- ENDING ---------- */

.celebration {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle, #ff9a9e, #ff0033);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  text-align: center;
  animation: pop 0.7s ease forwards;
}

.hearts {
  font-size: 2rem;
  animation: rain 0.8s infinite linear;
}

/* ---------- ANIMATIONS ---------- */

@keyframes bounce {
  from { transform: scale(1); }
  to { transform: scale(1.1); }
}

@keyframes bossPulse {
  from { transform: translateX(-50%) scale(1); }
  to { transform: translateX(-50%) scale(1.1); }
}

@keyframes pop {
  from { transform: scale(0); }
  to { transform: scale(1); }
}

@keyframes rain {
  0% { transform: translateY(0); }
  100% { transform: translateY(-20px); }
}
</style>
</head>

<body>

<!-- GAME -->
<div class="container" id="game">
  <div class="score" id="score">NO attempts: 0</div>
  <div class="chibi" id="chibi">ðŸ¥º</div>
  <h1>Will you be my Valentine?</h1>

  <div class="buttons">
    <button id="noBtn">NO ðŸ˜¤</button>
    <button id="yesBtn">YES ðŸ’–</button>
  </div>
</div>

<!-- CELEBRATION -->
<div class="celebration hidden" id="celebration">
  <h1>VICTORY!!! ðŸ’˜</h1>
  <p>You defeated the YES boss ðŸ˜³ðŸ’–</p>
  <div class="hearts">ðŸ’– ðŸ’• ðŸ’— ðŸ’˜ ðŸ’ž</div>
</div>

<script>
/* ---------- HARD RESET (CRITICAL) ---------- */
const game = document.getElementById("game");
const celebration = document.getElementById("celebration");
game.classList.remove("hidden");
celebration.classList.add("hidden");

/* ---------- ELEMENTS ---------- */
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const chibi = document.getElementById("chibi");
const scoreText = document.getElementById("score");

/* ---------- STATE ---------- */
let attempts = 0;
let scale = 1;
let victoryUnlocked = false;

const faces = ["ðŸ¥º", "ðŸ˜³", "ðŸ˜ ", "ðŸ˜¡", "ðŸ‘¹"];

/* ---------- NO BUTTON ---------- */
function handleNoAttempt() {
  attempts++;
  scoreText.textContent = `NO attempts: ${attempts}`;
  chibi.textContent = faces[Math.min(attempts, faces.length - 1)];

  // Shrink
  scale = Math.max(0.3, scale - 0.1);
  noBtn.style.transform = `scale(${scale})`;

  // Move inside screen safely
  const maxX = window.innerWidth - 120;
  const maxY = window.innerHeight - 220;
  noBtn.style.left = Math.random() * maxX + "px";
  noBtn.style.top = Math.random() * maxY + "px";

  // Unlock boss
  if (attempts >= 3) {
    yesBtn.classList.add("boss");
    yesBtn.textContent = "FINAL YES ðŸ’¥";
    victoryUnlocked = true;
  }
}

noBtn.addEventListener("mouseover", handleNoAttempt);
noBtn.addEventListener("touchstart", (e) => {
  e.preventDefault();
  handleNoAttempt();
});

/* ---------- YES BUTTON ---------- */
yesBtn.addEventListener("click", (e) => {
  e.preventDefault();
  if (!victoryUnlocked) return; // fake click protection

  game.classList.add("hidden");
  celebration.classList.remove("hidden");
});
</script>

</body>
</html>
